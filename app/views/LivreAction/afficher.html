#{extends 'main.html' /}
#{set title: 'Afficher un book' /}

#{if book}
<h1>Fiche du book: <i>${book?.titre}</i></h1>

<table>
    <input type="hidden" name="id" value="${book?.id}"/>
    <tr>
        <td><label>Titre du book:</label></td>
        <td>${book?.titre}</td>
    </tr>
    <tr>
        <td><label>Collection du book:</label></td>
        <td>${book?.collection}</td>
    </tr>
    <tr>
        <td><label>Etage:</label></td>
        <td>${book?.etage}</td>
    </tr>
    <tr>
        <td><label>Auteur du book:</label></td>
        <td>${book?.auteur?.libelle}</td>
    </tr>
</table>

<button><a href="@{LivreAction.modifier(book.id)}">&{'bouton.modifier'}</a></button>

#{/if}
#{elseif books}
<table class="tableauBasique">
    <thead>
    <tr>
        <th>Titre</th>
        <th>Collection</th>
        <th>Auteur</th>
    </tr>
    </thead>
    <tbody>
    #{list books, as:'item'}
    <tr>
        <td><a href="@{LivreAction.afficher(item.id)}">${item.titre}</a></td>
        <td>${item.collection}</td>
        <td><a href="@{AuteurAction.afficher(item.author.id)}">${item.auteur.libelle}</a></td>
    </tr>
    #{/list}
    </tbody>
</table>

<!-- Gestion de la pagination -->
%{
pagePrec = numPage - 1;
pageSuiv = numPage + 1;
int nbPageTotal = nbTotalResultat / nbParPage;
if(nbTotalResultat % nbParPage != 0) {
nbPageTotal++;
}
}%


<!-- Si pas premi�re page, mettre un lien pr�c�dent -->
#{if numPage > 1 }
<a href="@{LivreAction.pagination(pagePrec, query, nbTotalResultat)}">prec</a>
#{/if}

#{list items:1..nbPageTotal, as:'i'}
<a href="@{LivreAction.pagination(i, query, nbTotalResultat)}">${i}</a>
#{/list}

<!-- Si pas derniere page, mettre un lien precedent -->
#{if numPage < nbPageTotal }
<a href="@{LivreAction.pagination(pageSuiv, query, nbTotalResultat)}">suiv</a>
#{/if}


<!-- Compter le nombre de page, et mettre des liens vers chacun d'entre eux -->


#{/elseif}
#{else}
<p class="error">Il n'y a pas de book &agrave; afficher.</p>
#{/else}
